## WEB网络基础知识

https://blog.csdn.net/qq_40856225/article/details/82458128

https://blog.csdn.net/m0_37631322/article/details/83817807



###1 计算机网络七层协议

1. 应用层 ： 访问网络服务的接口 （协议有：**HTTP**，**SMTP（邮件报文传输协议）**，POP3，FTP（文件传输协议），**DNS**等）
2. 表示层 ： 定义数据格式及加密（URL加密，图片编解码）
3. 会话层 ： 定义了如何开始、控制和结束一个会话，包括对多个双向会话的控制和管理
4. 传输层 ： 应用程序端点之间传输应用层报文（协议有 TCP，UDP）
5. 网络层 ： 负责将数据报的网络层分组从一台主机移动到另一台主机（IP协议）
6. 数据链路层：定义了在单个链路上如何传输数据。
7. 物理层  ： 将报文中的一个一个比特的数据从一个节点移到下一个节点

#### 应用层

+ http协议（Hyper Text Transfer Protocol（超文本传输协议））

  + 简介：

    HTTP是基于TCP/IP通信协议来传递数据的（HTML 文件, 图片文件, 查询结果等）

    HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。

  + 特点

    + 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。
    + 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。
    + 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
    + 无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，另一方面，在服务器不需要先前信息时它的应答就较快。

  + 工作原理

    1. 客户端连接到Web服务器 ： 登录特定的HTTP端口
    2. 发送HTTP请求 ：通过TCP套接字，客户端向Web服务器发送一个文本的请求报文（由请求头部，请求行，空行，请求数据组成）
    3. 服务器接受请求并返回HTTP响应：Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。（一个响应由状态行、响应头部、空行和响应数据4部分组成）
    4. 释放连接的TCP连接 ： 若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;
    5. 客户端浏览器解析HTML内容 ： 客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。

  > **HTTP请求方式**
  >
  > **GET 请求指定的页面信息，并返回实体主体。**
  >
  > HEAD 类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头
  >
  > **POST 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。**
  >
  > **PUT 从客户端向服务器传送的数据取代指定的文档的内容。**
  >
  > DELETE 请求服务器删除指定的页面。
  >
  > CONNECT HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。
  >
  > OPTIONS 允许客户端查看服务器的性能。
  >
  > TRACE 回显服务器收到的请求，主要用于测试或诊断。

  

  

  >**HTTP状态码**
  >
  >- 1xx 表示成功接收请求，要求客户端继续提交下一次请求才能完成整个处理过程，接收的请求正在处理
  >- 2xx 表示成果接收到并且已经完成整个处理过程
  >  - 200 正常 一切ok
  >- 3xx 未完成请求，重定向码，客户需要进一步细化操作
  >  - 302重定向
  >  - 303 和 307 是 HTTP1.1 新加的服务器响应文档的状态码，它们是对 HTTP1.0 中的 302 状态码的细化，主要用在对非 GET、HEAD 方法的响应上。
  >
  >- 4xx 客户端错误码，服务器无法处理请求
  >  - 403 服务端理解客户端请求，但是拒绝处理（常见权限问题）
  >  - 404 服务器上不存在客户端请求的资源
  >- 5xx 服务器错误码，服务器处理请求出错
  >  - 500 服务器发生不可预期的错误
  >  - 503 服务器当前不能处理客户端的请求，一段时间后可能恢复正常

  >**HTTP请求报文**
  >
  >- 请求行
  >  -  包括三个字段（请求方法，URL字段，HTTP版本字段）
  >- 请求头 
  >  - HOST：指出对象所在主机。
  >  - User-Agent：首部行用来指明用户代理，即向服务器发送求请求的浏览器类型。
  >- 空行 
  >  - 请求头后面的空行是必须的
  >- 请求数据
  >  - 使用get方法是实体为空，使用post方法时才是用该实体。

  

  >**HTTP响应报文**
  >
  >+ 状态行
  >  + 由HTTP协议版本号， 状态码， 状态消息 三部分组成
  >+ 消息报头
  >  + 说明客户端要使用的一些附加信息
  >+ 空行
  >+ 响应正文
  >  + 空行后面的html部分为响应正文。

  

  >**http 和 https**
  >
  >HTTP（全称： Hypertext transfer protocol) 是一种详细规定了浏览器和万维网服务器之间互相通信规则的协议。
  >
  >HTTPS（全称：Hypertext Transfer Protocol over Secure Socket Layer），简单讲是HTTP的安全版，HTTP下加入SSL层，HTTPS的安全基础是SSL。https协议需要到ca（Certification Authority-认证机构）申请证书。HTTPS协议的主要作用：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。
  >
  >区别：
  >
  >1. HTTP发起的请求建立到服务器指定默认端口是80，HTTPS是443
  >2. HTTP无需证书，HTTPS需要CA机构颁发的SSL证书
  >3. HTTP工作于应用层，HTTPS工作于传输层
  >4. HTTP信息是明文传输，HTTPS则是具有安全性的ssl加密传输协议。
  >5. http的连接无状态,https有
  >
  >https工作流程
  >
  >	1. 浏览器访问https的网站
  > 	2. 服务器收到请求，准备证书（包含：算法、公钥、证书有效期）；
  > 	3. 服务器将证书发送到客户端；
  > 	4. 客户端收到证书，验证（很复杂的过程），验证成功后客户端生成一个随机数，用服务端的公钥对这个随机数加密，然后用hash算法生成签名做成证书。；
  > 	5. 客户端把自己生成的证书发给服务端，因为只有服务端有私钥，所以只能服务端来解密，这样就保证了即使其他人截获也没用。
  > 	6. 服务端收到证书后，用私钥验签，并解密出来随机数。这个随机数就是后续网络传输数据使用的对称加密密钥了
  > 	7. 后面的通信就全部用这个随机数加密传输。
  >
  >



### 3.http1.1和http1.0的区别

+ **http1.0对于每一次链接都需要建立一次连接，一次只能传送一个请求和响应，结束会关闭。**http1.0没有host字段
+ **http1.1 在同一个连接中可以传送多个请求和响应, 多个请求可以重叠和同时进行**, http1.1 必须有 host 字段
+ http1.1 中引入了 ETag 头, 它的值 entity tag 可以用来唯一的描述一个资源. 请求消息中可以使用 If-None-Match 头域来匹配资源的 entitytag 是否有变化
+ http1.1 新增了 Cache-Control 头域(消息请求和响应请求都可以使用), 它支持一个可扩展的指令子集
+ **http1.0 中只定义了 16 个状态响应码, 对错误或警告的提示不够具体. http1.1 引入了一个 Warning 头域, 增加对错误或警告信息的描述. 且新增了 24 个状态响应码**

### 4. TCP三次握手和四次挥手

+ 建立 TCP 连接需要三次握手:三次握手: 首先 Client 端发送连接请求报文，Server 端接受连接后回复 ACK 报文，并为这次连接分配资源。Client 端接收到 ACK 报文后也向 Server 段发送 ACK 报文，并分配资源，这样 TCP 连接就建立了。
  + 第一步: 客户机的 TCP 先向服务器的 TCP 发送一个连接请求报文. 这个特殊的报文中不含应用层数据, 其首部中的 SYN 标志位被置 1. 另外, 客户机会随机选择一个起始序号 seq=x(连接请求报文不携带数据,但要消耗掉一个序号)

